<!doctype html>
<html>
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Register</title><link rel="stylesheet" href="/styles.css"></head>
<body><div class="container"><div class="panel"><h1>Create account</h1><p>Username: lowercase letters, numbers, underscore. 3-20 chars.</p>
<form id="registerForm">
<div class="form-row"><label>Username</label><input name="username" required></div>
<div class="form-row"><label>Password</label><input name="password" type="password" minlength="6" required></div>
<button type="submit">Register</button>
</form>
<div id="msg" class="message"></div>
<p><a href="/login">Already have an account? Login</a></p></div></div>
<script src="/common.js"></script>
<script>
document.getElementById('registerForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const form = new FormData(e.target);
  try {
    const res = await postJson('/register', Object.fromEntries(form.entries()));
    location.href = res.redirectTo;
  } catch(err){ showMessage('msg', err.message, 'error'); }
});
</script></body></html>
